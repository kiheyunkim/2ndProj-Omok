{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\kihey\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\kihey\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\kihey\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\kihey\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\kihey\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import'./Room.css';var Room=/*#__PURE__*/function(_React$Component){_inherits(Room,_React$Component);function Room(props){var _this;_classCallCheck(this,Room);_this=_possibleConstructorReturn(this,_getPrototypeOf(Room).call(this,props));_this.readySocket=function(){_this.socket.on('RequestedRoomMember',function(recv){if(!_this._ismounted)return;console.log(recv.members);_this.setState({members:recv.members,adminState:recv.isAmIAdmin});});_this.socket.on('ReloadRoomMember',function(recv){if(!_this._ismounted)return;_this.socket.emit('RequestRoomMember','');});_this.socket.on('RoomInfo',function(recv){_this.setState({roomName:recv.roomTitle,roomNumber:recv.roomNumber});});_this.socket.on('StartFail',function(){alert('모두 준비 되지 않았습니다');});_this.socket.on('NotFull',function(){alert('인원이 부족합니다.');});_this.socket.emit('RequestRoomMember','');_this.socket.emit('RequestRoomInfo','');};_this.LeaveToWaitingRoom=function(){_this.socket.emit('RequestLeaveRoom','');};_this.NotifyReady=function(){_this.socket.emit('ReadyStateChangeRequest','');_this.setState({readyBttnState:!_this.state.readyBttnState});};_this.socket=props.socket;_this.state={members:[],adminState:false,readyBttnState:false,roomName:'',roomNumber:0};_this.readySocket();return _this;}_createClass(Room,[{key:\"componentDidMount\",value:function componentDidMount(){this._ismounted=true;}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._ismounted=false;}},{key:\"render\",value:function render(){var _this2=this;var renderMemberList=[];var memberArray=this.state.members;for(var i=0;i<memberArray.length;++i){renderMemberList.push(React.createElement(\"li\",{key:i},React.createElement(\"div\",{className:i===0?\"left\":\"right\"},React.createElement(\"div\",null,React.createElement(\"span\",{id:\"nickname\"},memberArray[i].nickname),React.createElement(\"p\",null,React.createElement(\"span\",{id:\"gameCnt\"},memberArray[i].winCount+memberArray[i].loseCount),\"\\uC804 \",React.createElement(\"span\",{id:\"winCnt\"},memberArray[i].winCount),\"\\uC2B9 \",React.createElement(\"span\",{id:\"loseCnt\"},memberArray[i].loseCount),\"\\uD328\"),React.createElement(\"b\",{className:memberArray[i].readyState?\"waiting\":\"preparing\"},memberArray[i].readyState?' 준비완료':'준비중')))));}var readyButton=[];if(this.state.adminState){readyButton.push(React.createElement(\"button\",{key:1,id:\"roomBtm\",onClick:function onClick(){return _this2.NotifyReady();}},\"\\uC2DC\\uC791\"));}else{readyButton.push(React.createElement(\"button\",{key:1,id:\"roomBtm\",className:this.state.readyBttnState?\"ready\":\"\",onClick:function onClick(){return _this2.NotifyReady();}},\"\\uC900\\uBE44\"));}return React.createElement(\"div\",{id:\"roombody\"},React.createElement(\"header\",{id:\"roomTop\"},React.createElement(\"span\",null,\"NO. \",this.state.roomNumber),React.createElement(\"h2\",{id:\"roomName\"},this.state.roomName)),React.createElement(\"ul\",{id:\"roomMid\"},renderMemberList),React.createElement(\"button\",{onClick:function onClick(){return _this2.LeaveToWaitingRoom();},className:\"exit\"},\"\\uB098\\uAC00\\uAE30\"),readyButton);}}]);return Room;}(React.Component);export default Room;","map":{"version":3,"sources":["C:/Users/kihey/Desktop/새 폴더 (3)/2ndProj-Omok/omok/src/Room.js"],"names":["React","Room","props","readySocket","socket","on","recv","_ismounted","console","log","members","setState","adminState","isAmIAdmin","emit","roomName","roomTitle","roomNumber","alert","LeaveToWaitingRoom","NotifyReady","readyBttnState","state","renderMemberList","memberArray","i","length","push","nickname","winCount","loseCount","readyState","readyButton","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport './Room.css'\r\n\r\nclass Room extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.socket = props.socket;\r\n        this.state={members:[], adminState:false, readyBttnState:false, roomName:'', roomNumber:0};\r\n        this.readySocket();\r\n    }\r\n\r\n    componentDidMount() { \r\n        this._ismounted = true;\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._ismounted = false;\r\n    }\r\n\r\n    readySocket = () =>{\r\n        this.socket.on('RequestedRoomMember',(recv)=>{\r\n            if(!this._ismounted)\r\n                return;\r\n                console.log(recv.members);\r\n            this.setState({members:recv.members,adminState:recv.isAmIAdmin});\r\n        });\r\n\r\n        this.socket.on('ReloadRoomMember',(recv)=>{\r\n            if(!this._ismounted)\r\n                return;\r\n            \r\n            this.socket.emit('RequestRoomMember','');\r\n        });\r\n\r\n        this.socket.on('RoomInfo',(recv)=>{\r\n            this.setState({roomName:recv.roomTitle,roomNumber:recv.roomNumber});\r\n        })\r\n\r\n        this.socket.on('StartFail',()=>{\r\n            alert('모두 준비 되지 않았습니다');\r\n        })\r\n\r\n        this.socket.on('NotFull',()=>{\r\n            alert('인원이 부족합니다.');\r\n        })\r\n\r\n        this.socket.emit('RequestRoomMember','');\r\n        this.socket.emit('RequestRoomInfo','');\r\n    }\r\n    \r\n    LeaveToWaitingRoom = () =>{\r\n        this.socket.emit('RequestLeaveRoom','');\r\n    }\r\n   \r\n    NotifyReady = ()=>{\r\n        this.socket.emit('ReadyStateChangeRequest','');\r\n        this.setState({readyBttnState:(!this.state.readyBttnState)});\r\n    }\r\n\r\n    render(){\r\n        let renderMemberList=[];\r\n        let memberArray = this.state.members;\r\n        for(let i=0;i<memberArray.length;++i){\r\n            renderMemberList.push(\r\n                <li key = {i}>\r\n                    <div className={i===0 ? \"left\" : \"right\"}>\r\n                        <div>\r\n                            <span id=\"nickname\">{memberArray[i].nickname}</span>\r\n                            <p><span id=\"gameCnt\">{memberArray[i].winCount + memberArray[i].loseCount}</span>전 <span id=\"winCnt\">{memberArray[i].winCount}</span>승 <span id=\"loseCnt\">{memberArray[i].loseCount}</span>패</p>\r\n                            <b className={memberArray[i].readyState?\"waiting\":\"preparing\"}>{memberArray[i].readyState?' 준비완료':'준비중'}</b>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            );            \r\n        }\r\n\r\n        let readyButton = [];\r\n        if(this.state.adminState){\r\n            readyButton.push(<button key={1} id=\"roomBtm\" onClick={()=>this.NotifyReady()} >시작</button>);\r\n        }else{\r\n            readyButton.push(<button key={1} id=\"roomBtm\" className={this.state.readyBttnState ? \"ready\" : \"\"} onClick={()=>this.NotifyReady()} >준비</button>);\r\n        }\r\n\r\n        return(\r\n            <div id=\"roombody\">\r\n                <header id=\"roomTop\">\r\n\t\t\t\t\t<span>NO. {this.state.roomNumber}</span>\r\n\t\t\t\t\t<h2 id=\"roomName\">{this.state.roomName}</h2>\r\n\t\t\t\t</header>\r\n\r\n                <ul id=\"roomMid\">\r\n                   {renderMemberList}\r\n\t\t\t\t</ul>\r\n\r\n                <button onClick={()=>this.LeaveToWaitingRoom()} className=\"exit\">나가기</button>\r\n                {readyButton}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Room;"]},"metadata":{},"sourceType":"module"}